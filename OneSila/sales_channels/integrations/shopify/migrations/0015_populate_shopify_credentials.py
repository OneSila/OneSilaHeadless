# Generated by Codex on 2025-??
from django.db import migrations, models


def populate_shopify_api_credentials(apps, schema_editor):
    ShopifySalesChannel = apps.get_model('shopify', 'ShopifySalesChannel')
    from django.conf import settings
    api_key = getattr(settings, 'SHOPIFY_API_KEY', None)
    api_secret = getattr(settings, 'SHOPIFY_API_SECRET', None)
    if not api_key or not api_secret:
        return
    filters = (
        models.Q(api_key__isnull=True) | models.Q(api_key='') | models.Q(api_secret__isnull=True) | models.Q(api_secret='')
    )
    ShopifySalesChannel.objects.filter(filters).update(
        api_key=api_key,
        api_secret=api_secret,
    )


class Migration(migrations.Migration):
    dependencies = [
        ('shopify', '0014_shopifysaleschannel_api_key_and_more'),
    ]
    operations = [
        migrations.RunPython(populate_shopify_api_credentials, reverse_code=migrations.RunPython.noop),
    ]
